// Underscore.date
//
// (c) 2011 Tim Wood
// Underscore.date is freely distributable under the terms of the MIT license.
//
// Version 0.3.0

(function(a,b,c){function m(a,b){return h[a].replace(/%d/i,b||1)}function l(b){return b===c?e.now(!0):b instanceof a?b.getTime():b}function k(b){function q(a){return p[a]?p[a]():a}var c=this,d=c.getMonth(),e=c.getDate(),h=c.getFullYear(),k=c.getDay(),l=c.getHours(),m=c.getMinutes(),n=c.getSeconds(),o=/Mo|MM?M?M?|Do|DDDo|DD?D?D?|dddd?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?/g,p={M:function(){return d+1},Mo:function(){return d+1+i(d+1)},MM:function(){return j(d+1,2)},MMM:function(){return f[d].slice(0,3)},MMMM:function(){return f[d]},D:function(){return e},Do:function(){return e+i(e)},DD:function(){return j(e,2)},DDD:function(){var b=new a(h,d,e),c=new a(h,0,1);return(b-c)/864e5+1.5|0},DDDo:function(){var a=p.DDD();return a+i(a)},DDDD:function(){return j(p.DDD(),3)},d:function(){return k},"do":function(){return k+i(k)},ddd:function(){return g[k].slice(0,3)},dddd:function(){return g[k]},w:function(){var b=new a(h,d,e-k+5),c=new a(b.getFullYear(),0,4);return(b-c)/864e5/7+1.5|0},wo:function(){var a=p.w();return a+i(a)},ww:function(){return j(p.w(),2)},YY:function(){return(h+"").slice(-2)},YYYY:function(a){return h},a:function(){return l>11?"pm":"am"},A:function(){return l>11?"PM":"AM"},H:function(){return l},HH:function(){return j(l,2)},h:function(){return l%12||12},hh:function(){return j(l%12||12,2)},m:function(){return m},mm:function(){return j(m,2)},s:function(){return n},ss:function(){return j(n,2)}};return b.replace(o,q)}function j(a,b){var c=a+"";while(c.length<b)c="0"+c;return c}function i(a){return(a/10|0)===1?"th":a%10===1?"st":a%10===2?"nd":a%10===3?"rd":"th"}var d=this,e,f=["January","February","March","April","May","June","July","August","September","October","November","December"],g=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],h={future:"in %s",past:"%s ago",s:"less than a minute",m:"about a minute",mm:"%d minutes",h:"about an hour",hh:"about %d hours",d:"a day",dd:"%d days",M:"about a month",MM:"%d months",y:"about a year",yy:"%d years"};e={now:function(b){return b?(new a).getTime():new a},relativetime:function(a){var b=Math.abs(l(a))/1e3,c=b/60,d=c/60,e=d/24,f=e/365;return b<45&&m("s",b|0)||b<90&&m("m")||c<45&&m("mm",c|0)||c<90&&m("h")||d<24&&m("hh",d|0)||d<48&&m("d")||e<30&&m("dd",e|0)||e<60&&m("M")||e<350&&m("MM",e/30|0)||f<2&&m("y")||m("yy",f|0)},msapart:function(a,b){return l(a)-l(b)},fromnow:function(a,b){var c=e.msapart(a,b),d=c<0?h.past:h.future;return d.replace(/%s/i,e.relativetime(c))},customizedate:function(a){a.weekdays&&b.isArray(a.weekdays)&&a.weekdays.length===7&&(g=a.weekdays),a.months&&b.isArray(a.months)&&a.months.length===12&&(f=a.months),a.timeago&&b.extend(h,a.timeago),a.ordinal&&b.isFunction(a.ordinal)&&(i=a.ordinal)}},a.prototype.humanize=k,d._d=e,b&&b.mixin&&b.mixin(e)})(Date,_)
